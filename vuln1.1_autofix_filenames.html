<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Be My Valentine?</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&display=swap');

:root{
  --primary:#d62828;
  --primary2:#c1121f;
  --bg:#fff0f3;
  --text:#590d22;
  --card:rgba(255,255,255,.75);
}

*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  font-family:'Quicksand',sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  text-align:center;
}

#bg{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}

.bg-img{
  position:absolute;
  opacity:.22;
  border-radius:12px;
  animation:float 22s linear infinite;
}

@keyframes float{
  from{transform:translateY(110vh) rotate(0deg)}
  to{transform:translateY(-20vh) rotate(360deg)}
}

.wrap{position:relative;z-index:5;width:min(640px,92vw)}
h1{
  font-family:'Dancing Script',cursive;
  font-size:3.4rem;
  color:var(--primary);
  margin:0 0 18px;
}

button{
  border:0;
  background:var(--primary);
  color:#fff;
  padding:14px 38px;
  font-size:1.15rem;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
}
button:hover{background:var(--primary2)}

.screen{display:none;flex-direction:column;align-items:center}
.screen.active{display:flex}

#field{
  width:100%;
  height:320px;
  background:var(--card);
  border-radius:18px;
  position:relative;
  overflow:hidden;
}

#yes2,#no{
  position:absolute;
}

#yes2{
  top:55%;
  left:50%;
  transform:translate(-50%,-50%);
}

#no{
  background:#777;
  pointer-events:none;
}

video{
  width:100%;
  max-width:520px;
  border-radius:16px;
  background:#000;
}

#heart{
  position:absolute;
  font-size:38px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="bg"></div>

<div class="wrap">

  <div id="s1" class="screen active">
    <h1>Will you be my Valentine?</h1>
    <button id="yes1">YES ‚ù§Ô∏è</button>
  </div>

  <div id="s2" class="screen">
    <h1>One more time‚Ä¶</h1>
    <div id="field">
      <button id="yes2">YES ‚ù§Ô∏è</button>
      <button id="no">NO</button>
    </div>
  </div>

  <div id="s3" class="screen">
    <h1>I Love You!</h1>
    <video id="vid" controls></video>
  </div>

  <div id="s4" class="screen">
    <h1>Bonus üíò</h1>
    <p>Tap the heart for 15 seconds</p>
    <div id="field">
      <div id="heart">üíò</div>
    </div>
  </div>

</div>

<audio id="sndClick"></audio>
<audio id="sndDodge"></audio>
<audio id="sndWin"></audio>

<script>
/* ---------- FILES YOU CURRENTLY HAVE (NO EXTENSIONS) ---------- */
const VIDEO_BASE = "25F2C07F-B9B3-47B1-80DE-A939F3E4E87D";
const IMAGE_BASES = [
  "IMG_0243","IMG_1147","IMG_1614","IMG_4809",
  "IMG_5266","IMG_5711","IMG_7557","IMG_7926","IMG_8841"
];
const SOUND_BASES = { click:"click", dodge:"dodge", win:"win" };

/* ---------- HELPERS ---------- */
async function tryLoad(el, bases, exts){
  for(const b of bases){
    for(const e of exts){
      const src = e ? `${b}.${e}` : b;
      try{
        el.src = src;
        await el.load?.();
        return src;
      }catch{}
    }
  }
  return null;
}

function rand(n){return Math.floor(Math.random()*n)}

/* ---------- BACKGROUND IMAGES ---------- */
const bg = document.getElementById("bg");

function addBg(src){
  const i=document.createElement("img");
  i.src=src;
  i.className="bg-img";
  i.style.width=80+Math.random()*160+"px";
  i.style.left=Math.random()*100+"vw";
  i.style.top=Math.random()*100+"vh";
  i.style.animationDuration=18+Math.random()*24+"s";
  bg.appendChild(i);
}

(async()=>{
  for(const b of IMAGE_BASES){
    for(const ext of ["jpg","jpeg","png","",null]){
      const src = ext?`${b}.${ext}`:b;
      const img=new Image();
      img.onload=()=>addBg(src);
      img.src=src;
    }
  }
})();

/* ---------- SCREENS ---------- */
const s1=s=>document.getElementById(s);
function show(id){
  ["s1","s2","s3","s4"].forEach(x=>s1(x).classList.remove("active"));
  s1(id).classList.add("active");
}

/* ---------- SOUND ---------- */
const c=document.getElementById("sndClick");
const d=document.getElementById("sndDodge");
const w=document.getElementById("sndWin");

(async()=>{
  await tryLoad(c,[SOUND_BASES.click],["mp3","wav","",null]);
  await tryLoad(d,[SOUND_BASES.dodge],["mp3","wav","",null]);
  await tryLoad(w,[SOUND_BASES.win],["mp3","wav","",null]);
})();

function play(a){try{a.currentTime=0;a.play()}catch{}}

/* ---------- BUTTON LOGIC ---------- */
const yes1=s1("yes1"),yes2=s1("yes2"),no=s1("no");
const field=s1("field");

yes1.onclick=()=>{play(c);show("s2");moveNo()};
yes2.onclick=async()=>{
  play(w);
  show("s3");
  const v=s1("vid");
  await tryLoad(v,[VIDEO_BASE],["mp4","mov","webm","",null]);
  v.play?.();
};

function moveNo(){
  no.style.left=rand(field.clientWidth-no.offsetWidth)+"px";
  no.style.top=rand(field.clientHeight-no.offsetHeight)+"px";
}

field.onmousemove=e=>{
  const r=no.getBoundingClientRect();
  if(Math.hypot(e.clientX-(r.left+r.width/2),e.clientY-(r.top+r.height/2))<120){
    moveNo(); play(d);
  }
};

/* ---------- BONUS GAME ---------- */
const heart=s1("heart");
let t=15,run=false,tm;

heart.onclick=()=>{ if(!run){run=true;show("s4");tm=setInterval(()=>{if(--t<=0){clearInterval(tm)}},1000)} moveNo(); };

</script>
</body>
</html>
